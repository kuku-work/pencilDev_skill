# Pencil.dev AI 設計助手技能包

這是一套專為 **Pencil.dev** 設計工具打造的 Claude Code 技能系統，讓你能用自然語言指揮 AI 完成設計工作。

---

## 什麼是 Pencil.dev？

Pencil.dev 是一個革命性的設計工具，它的特別之處在於：

1. **設計檔案存在 Git 裡** - 不像 Figma 存在雲端，Pencil 的 `.pen` 檔案直接在你的專案資料夾中
2. **AI 可以讀寫設計** - 透過 MCP 協議，AI 能理解你的設計並直接修改它
3. **設計即程式碼** - 在畫布上畫的東西可以直接轉成 HTML/CSS/React 程式碼

簡單說：**你用文字告訴 AI 你想要什麼，它幫你畫出來，還能直接變成程式碼**。

---

## 這個專案是什麼？

這是一套「技能包」，教會 Claude Code 如何有效地使用 Pencil.dev。

想像你請了一個設計助理，但這個助理需要一本操作手冊才能發揮最大效用。這套技能包就是那本手冊，它告訴 AI：

- 什麼樣的提示詞最有效
- 設計流程應該怎麼走
- 遇到問題要怎麼處理

---

## Skill vs Command：兩種觸發方式

這套技能包提供兩種使用方式：

### Skill（自動觸發）- 最推薦

**你不需要輸入任何指令**，直接用自然語言描述需求，AI 會自動判斷並啟動設計功能。

```
你：幫我設計一個記帳 App
AI：[自動識別為設計需求，啟動 pencil-design skill]
```

**運作原理**：
- Skill 使用 YAML frontmatter 定義「觸發條件」
- AI 會根據對話內容自動判斷是否相關
- 不需要記住任何指令名稱

**觸發關鍵詞**：
- 設計相關：設計、做一個、建立、Design、Create、Build
- 修改相關：改成、換、調整、Change、Modify
- 風格相關：試試、不同風格、探索
- 程式碼：產生程式碼、轉成 React
- 問題：壞了、重疊、跑版

### Command（手動觸發）

需要輸入 `/指令名稱` 來啟動特定功能，適合你已經知道要做什麼的情況。

```
你：/pencil-new
AI：請告訴我你想設計什麼？
```

---

## Skill：pencil-design（自動觸發的智能助手）

這是核心 Skill，會根據你的對話自動判斷該做什麼：

| 你說的話 | AI 判斷為 | 自動執行 |
|----------|-----------|----------|
| 「做一個 App」「設計網站」 | NEW_DESIGN | 從零開始建立 |
| 「改成藍色」「間距太大」 | ITERATE | 調整選取的設計 |
| 「試試更大膽的」「不同風格」 | EXPLORE | 產生風格變體 |
| 「加一個設定頁」 | EXTEND | 建立新頁面 |
| 「轉成 React」 | CODE | 產出程式碼 |
| 「壞掉了」「重疊」 | FIX | 診斷並修復 |

**範例對話**（完全不需要指令）：
```
你：幫我設計一個美食外送 App
AI：[識別為設計需求] 好的，請問你偏好什麼風格？

你：簡約現代的，主要功能是點餐和追蹤訂單
AI：[開始設計，產出介面]

你：這個太暗了
AI：[識別為修改] 好的，我來調亮配色
AI：[調整後展示截圖]

你：再幫我做一個訂單歷史頁
AI：[識別為延伸頁面] 好的，我會保持相同風格
AI：[建立新頁面]
```

---

## Skill：figma-to-pencil（Figma 匯入解析）

當你從 Figma 複製貼上設計到 Pencil 時，這個 Skill 會自動啟動，幫你：

1. **分析結構** - 檢查巢狀深度、節點數量、元件使用
2. **提取 Token** - 找出顏色、字型、間距模式
3. **發現問題** - 過深巢狀、硬編碼值、混合定位
4. **提供優化建議** - 扁平化、建立變數、轉換 Auto-layout

**觸發關鍵詞**：
- Figma、貼上、匯入、import、paste
- 分析設計、解析結構
- 優化、清理、整理

**範例對話**：
```
你：我剛從 Figma 貼了一個設計過來，幫我看看有什麼問題
AI：[自動啟動 figma-to-pencil skill]

# Figma 匯入分析報告

## 結構統計
| 項目 | 數值 | 評估 |
|------|------|------|
| 總節點數 | 45 | - |
| 最深巢狀 | 6 層 | ⚠️ 建議 ≤4 層 |
| 獨特顏色 | 12 個 | 建議提取為變數 |

## 發現的問題
1. 過深巢狀：frame > wrapper > container > inner > content
2. 硬編碼顏色：15 處使用直接色碼
3. 不規則間距：發現 13, 17, 22px（非 8px 倍數）

## 建議動作
我可以幫你：
A. 自動修復所有問題
B. 逐項確認後修復
C. 僅提取設計 Token
D. 產生報告稍後處理

請選擇 A/B/C/D
```

### 給設計師的建議

在 Figma 階段就做好這些事，可以讓匯入更順利：

| 做好的事 | 為什麼重要 |
|----------|------------|
| 使用 Auto-layout | 保持彈性排版，不會變成絕對定位 |
| 建立 Styles/Variables | 顏色字型可自動提取為 Pencil 變數 |
| 語意化命名 | 「Header」比「Frame 1」更好維護 |
| 適度元件化 | 減少重複，保持一致性 |

### 給開發者的建議

匯入後常見的優化工作：

| 問題 | 解決方案 |
|------|----------|
| 巢狀 > 4 層 | 扁平化，移除空容器 |
| 硬編碼顏色 | 提取為 CSS variables |
| 混合定位 | 統一使用 layout 屬性 |
| 不規則間距 | 標準化為 8px grid |

---

## Commands（手動指令）

如果你偏好明確控制，也可以使用這些指令：

### 智能指令

| 指令 | 用途 |
|------|------|
| `/pencil` | 智能路由 - 分析意圖後自動執行對應流程 |
| `/design` | 複雜工作流 - 多頁面設計、風格比較、完整流程 |
| `/figma-parse` | Figma 匯入解析 - 分析結構、提取 Token、優化建議 |

### 專用指令

---

## 專用指令（當你知道確切要做什麼）

如果你偏好明確指定動作，也可以使用這些專用指令：

### `/pencil-new` - 從零開始設計

**用途**：當你需要一個全新的設計時使用。

**範例對話**：
```
你：/pencil-new
AI：請告訴我你想設計什麼？

你：我要做一個記帳 App，風格要簡潔清爽
AI：[開始設計，產出包含圖表、交易列表、預算進度條的介面]
```

**背後原理**：AI 會引導你提供必要資訊（平台、用途、風格、元件），然後組合成有效的提示詞。

---

### `/pencil-iterate` - 修改現有設計

**用途**：當你已經有設計，想要調整某些部分時使用。

**範例對話**：
```
你：/pencil-iterate
AI：請先在畫布上選取要修改的設計

你：[選取設計] 我想把它改成深色模式，但保留現在的排版
AI：[產出深色版本，排版不變]
```

**背後原理**：AI 會先確認你選了什麼，然後只改你要改的部分，其他保持不動。

---

### `/pencil-explore` - 探索不同風格

**用途**：當你想看看同一個設計用不同風格會長怎樣。

**範例對話**：
```
你：/pencil-explore
AI：你想探索什麼方向？

你：我想看看更大膽、更有個性的風格
AI：[產出強調大標題、對比色、Swiss 排版的版本]
```

**背後原理**：AI 會準備一組「風格關鍵詞」（如 Scandinavian、Swiss layout），幫你快速切換設計方向。

---

### `/pencil-extend` - 延伸設計到新頁面

**用途**：當你已經有一頁設計好了，想做其他頁面但風格要一致。

**範例對話**：
```
你：/pencil-extend
AI：請選取你的基礎設計

你：[選取首頁設計] 我需要一個設定頁
AI：[產出風格一致的設定頁，包含個人資料、通知設定、帳號安全等區塊]
```

**背後原理**：AI 會分析你的基礎設計（顏色、字型、間距），確保新頁面看起來像同一個產品。

---

### `/pencil-code` - 把設計變成程式碼

**用途**：設計完成後，要產出可以用的程式碼。

**範例對話**：
```
你：/pencil-code
AI：你使用什麼技術棧？

你：React + Tailwind + shadcn/ui
AI：[產出完整的 React 元件程式碼，使用 Tailwind 樣式和 shadcn 元件]
```

**背後原理**：AI 會讀取設計的結構和變數，轉換成符合你專案規範的程式碼。

---

### `/pencil-fix` - 修復設計問題

**用途**：當設計出問題（排版亂掉、元素重疊、產生錯誤）時使用。

**範例對話**：
```
你：/pencil-fix
AI：發生什麼問題？

你：卡片都疊在一起了，間距好像壞掉
AI：[診斷問題，發現是 layout 設定錯誤，修復後產出正確版本]
```

**背後原理**：AI 會使用診斷工具檢查排版問題，找出根本原因再修復。

---

## 專案結構說明

```
kuku_project/
├── CLAUDE.md                    # AI 的「操作手冊」
├── README.md                    # 你正在看的這份文件
├── pencilDev_prompt_strategy.md # 原始方法論文件
├── design/
│   └── pencil-new.pen           # Pencil 設計檔案範例
├── assets/                      # 資源檔案夾
└── .claude/
    ├── README.md                # 技能系統的技術文件
    │
    ├── skills/                  # Skills（自動觸發）
    │   ├── pencil-design/       # 核心設計技能
    │   │   ├── SKILL.md
    │   │   └── references/
    │   │       ├── workflows.md
    │   │       ├── prompt-templates.md
    │   │       └── style-keywords.md
    │   │
    │   └── figma-to-pencil/     # Figma 匯入解析
    │       ├── SKILL.md
    │       └── references/
    │           ├── migration-guide.md   # 設計/工程建議
    │           └── common-patterns.md   # 常見模式對應
    │
    └── commands/                # Commands（手動觸發 /指令）
        ├── pencil.md            # 智能路由
        ├── design.md            # 複雜工作流
        ├── figma-parse.md       # Figma 解析
        ├── pencil-new.md        # 新設計
        ├── pencil-iterate.md    # 迭代修改
        ├── pencil-explore.md    # 風格探索
        ├── pencil-extend.md     # 頁面延伸
        ├── pencil-code.md       # 程式碼生成
        └── pencil-fix.md        # 除錯修復
```

### Skills vs Commands 對照

| 類型 | 觸發方式 | 檔案格式 | 適用情境 |
|------|----------|----------|----------|
| **Skill** | 自動（AI 判斷對話內容） | `SKILL.md` + YAML frontmatter | 自然對話，不想記指令 |
| **Command** | 手動（輸入 `/指令`） | `指令名.md` | 明確知道要做什麼 |

### 各檔案用途

| 檔案 | 用途 | 觸發方式 |
|------|------|----------|
| `CLAUDE.md` | 專案級 AI 指令 | 自動載入 |
| `.claude/skills/*/SKILL.md` | Skill 定義 | AI 自動判斷 |
| `.claude/commands/*.md` | Command 定義 | 使用者輸入 /指令 |
| `*.pen` | Pencil.dev 設計檔 | MCP 工具讀寫 |

---

## 核心概念：有效提示詞的三層結構

這套技能系統基於一個重要發現：**精確的提示詞比模糊的提示詞效果好非常多**。

### 第一層：產品表面（你要什麼）

不要說：「做一個儀表板」

要說：「做一個儀表板，包含業績排行榜、營收圖表、待辦事項列表」

### 第二層：使用情境（誰在用、怎麼用）

加上：「給業務經理在早會時快速看績效用的」

### 第三層：約束條件（風格和限制）

再加上：「卡片式排版，綠色代表達標，桌面優先」

### 完整範例

```
做一個業務儀表板，包含：
- 前五名業績排行（顯示姓名和營收）
- 團隊營收進度條
- 交易管線各階段數量

給業務經理在早會時用，需要快速看出誰表現不好。
桌面版，卡片排版，綠色=達標，黃色=風險。
```

這樣的提示詞會比「做一個好看的儀表板」快 19 秒、少 152 行程式碼、成本低 7.5%。

---

## 工作流程建議

### 最簡單的用法（Skill 自動觸發）

完全不需要輸入任何指令，直接說你要做什麼：

```
你：幫我設計一個電商 App 的首頁
AI：[自動啟動 pencil-design skill，開始設計流程]

你：這個顏色太冷了，換成暖色調
AI：[自動判斷為修改需求，調整配色]

你：再幫我做一個購物車頁
AI：[自動判斷為延伸頁面，保持風格一致]

你：好，現在幫我產生 React 程式碼
AI：[自動判斷為程式碼生成，輸出實作]
```

### 使用 Command 的情況

當你想要更精確控制時：

```
/pencil-new        # 明確要從零開始
/pencil-iterate    # 明確要修改選取項
/pencil-explore    # 明確要探索風格
/design            # 明確要做多頁面複雜任務
/figma-parse       # 明確要解析 Figma 匯入
```

### 複雜專案（多頁面）

```
/design

描述完整需求，例如：
「設計一個外送 App，要有首頁、餐廳列表、餐點詳情、購物車」

AI 會：
1. 依序建立每個頁面
2. 每完成一頁詢問確認
3. 自動保持風格一致
4. 最後可選擇產出程式碼
```

### 傳統流程（手動控制每一步）

```
1. /pencil-new     → 建立第一個畫面
2. /pencil-iterate → 調整細節（顏色、間距、文字）
3. /pencil-explore → 嘗試不同風格方向
4. /pencil-extend  → 建立其他頁面
5. /pencil-code    → 產出程式碼
```

### 出問題時

```
/pencil 排版壞了

或

/pencil-fix → 描述問題現象
```

---

## 注意事項

### .pen 檔案是加密的

不要用 `cat` 或一般文字編輯器開 `.pen` 檔案，它們是 Pencil.dev 專用格式。AI 會透過 MCP 工具來讀寫。

### 每次只做一件事

不要在一個提示詞裡塞太多要求。「改顏色、換字型、加動畫、重新排版」應該拆成四個步驟。

### 永遠要選取

使用 `/pencil-iterate`、`/pencil-explore`、`/pencil-extend` 前，記得先在畫布上選取你要處理的設計。

---

## 參考資源

- [Pencil.dev 官方網站](https://pencil.dev)
- [Pencil.dev 提示詞範例庫](https://pencil.dev/prompts)
- 本專案的方法論來源：`pencilDev_prompt_strategy.md`

---

## 版本資訊

- **版本**：2.0.0
- **更新日期**：2025-01-28
- **新增**：Skills 架構、Figma 匯入解析
- **相容性**：Claude Code + Pencil.dev MCP
